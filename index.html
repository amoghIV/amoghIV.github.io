<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pantheon • Immersive Tour</title>

<!-- Performance: preconnect for fast image/audio loads -->
<link rel="preconnect" href="https://commons.wikimedia.org" crossorigin>
<link rel="preconnect" href="https://upload.wikimedia.org" crossorigin>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b0b0e;
    --fg:#f2efe9;
    --muted:#cfc9bb;
    --accent:#e15b5b;
    --accent-2:#a33d3d;
    --glass:rgba(10,10,14,.55);
    --card:rgba(16,16,20,.65);
    --shadow: 0 10px 40px rgba(0,0,0,.45);
    --radius:16px;
    --maxw:1050px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;background:var(--bg);color:var(--fg);
    font-family: "Cinzel", serif; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    overflow:hidden;
  }

  /* Home */
  #home{
    position:fixed; inset:0; display:grid; place-items:center;
    background:#000 url("https://commons.wikimedia.org/wiki/Special:FilePath/Pantheon%20and%20fountain%20at%20night.JPG?width=1920") center/cover no-repeat;
  }
  .veil{position:absolute; inset:0; background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.65))}
  .home-card{
    position:relative; z-index:2; max-width:var(--maxw);
    background:var(--card); border:1px solid rgba(255,255,255,.08);
    border-radius:var(--radius); padding:24px; box-shadow:var(--shadow);
    text-align:center; backdrop-filter: blur(6px);
  }
  .home-title{font-size:clamp(28px,4.2vw,56px); letter-spacing:.6px; margin:0 0 6px}
  .home-sub{opacity:.9; margin:0 0 18px}
  .mla{
    margin:16px auto 22px; display:inline-block; text-align:left; line-height:1.6;
    padding:12px 16px; background:rgba(255,255,255,.05); border-radius:10px; border:1px solid rgba(255,255,255,.07)
  }
  .home-btn{
    appearance:none; border:none; cursor:pointer;
    background:linear-gradient(180deg,var(--accent),var(--accent-2));
    color:#fff; padding:14px 22px; border-radius:12px; font-size:18px; font-weight:700;
    box-shadow:0 10px 30px rgba(225,91,91,.25);
    transition:transform .2s ease, box-shadow .2s ease, filter .2s ease;
  }
  .home-btn:hover{transform:translateY(-2px); filter:saturate(1.05); box-shadow:0 14px 32px rgba(225,91,91,.35)}
  .hint{margin-top:10px; font-size:14px; color:var(--muted); opacity:.9}

  /* App chrome */
  #app{position:fixed; inset:0; display:none}
  .slide{
    position:absolute; inset:0; display:grid; grid-template-rows:1fr auto; place-items:stretch;
    background:#000 center/cover no-repeat; opacity:0; pointer-events:none;
    transform:scale(1.02); transition:opacity .7s ease, transform .7s ease;
  }
  .slide::before{ /* darken for readability */
    content:""; position:absolute; inset:0; background:radial-gradient(1200px 600px at 60% 70%,rgba(0,0,0,.15),rgba(0,0,0,.65) 60%, rgba(0,0,0,.85));
  }
  .slide.active{opacity:1; transform:scale(1); pointer-events:auto}
  .content{
    position:relative; z-index:2; padding:22px; display:flex; justify-content:center;
  }
  .card{
    width:min(92vw,var(--maxw));
    background:var(--glass); border:1px solid rgba(255,255,255,.08);
    border-radius:var(--radius); padding:18px 18px 16px; margin:0 auto 28px; box-shadow:var(--shadow);
    backdrop-filter: blur(6px);
  }
  .title{font-size:clamp(22px,3vw,32px); margin:0 0 8px; color:#f0e6d2}
  .para{margin:6px 2px 8px; line-height:1.65; font-size:clamp(15px,1.4vw,18px)}
  .bullets{margin:8px 6px 4px 22px; padding:0}
  .bullets li{margin:8px 0; line-height:1.55; font-size:clamp(14px,1.3vw,17px)}
  .foot{
    display:flex; justify-content:space-between; align-items:center; gap:12px;
    padding:0 18px 18px;
  }
  .progress{
    position:fixed; top:12px; left:50%; transform:translateX(-50%);
    z-index:10; background:rgba(0,0,0,.45); padding:6px 12px; border-radius:999px; font-size:14px; border:1px solid rgba(255,255,255,.08)
  }
  .navbtn{
    position:fixed; top:50%; transform:translateY(-50%); z-index:8;
    width:46px; height:46px; border-radius:50%; border:1px solid rgba(255,255,255,.18);
    display:grid; place-items:center; background:rgba(0,0,0,.35); color:#fff; cursor:pointer;
    transition:transform .15s ease, background .2s ease; user-select:none;
  }
  .navbtn:hover{transform:translateY(-50%) scale(1.04); background:rgba(0,0,0,.45)}
  #prev{left:14px} #next{right:14px}

  /* Buttons: audio + sources */
  .audio{
    position:fixed; left:12px; bottom:12px; z-index:12;
    background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
    color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer;
  }
  .sources{
    position:fixed; right:12px; bottom:12px; z-index:12;
    border:none; background:transparent; cursor:pointer;
    font-family:"Great Vibes", cursive; font-size:28px; color:#ffb3b3; text-shadow:0 2px 8px rgba(0,0,0,.7);
  }

  /* Sources overlay */
  #sourcesPane{
    position:fixed; inset:0; display:none; z-index:30; background:rgba(0,0,0,.88);
  }
  .sources-wrap{
    max-width:min(1000px,92vw); margin:6vh auto; background:var(--card);
    border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:22px 22px 10px;
    box-shadow:var(--shadow); height:88vh; overflow:auto;
  }
  .sources-wrap h2{
    text-align:center; margin:4px 0 14px; color:#ffbebe; font-weight:700;
  }
  .sources-wrap ul{list-style:none; padding:0; margin:0}
  .sources-wrap li{margin:10px 0 16px; line-height:1.5}
  .closeX{
    position:sticky; top:6px; float:right; margin-right:-8px;
    font-size:22px; background:none; color:#ffbebe; border:none; cursor:pointer;
  }
  .sources-wrap a{color:#9ec5ff; text-decoration:none}
  .sources-wrap a:hover{text-decoration:underline}

  /* Enter/exit motion */
  .slide.entering{animation:enter .7s ease both}
  .slide.exiting{animation:exit .55s ease both}
  @keyframes enter{from{opacity:0; transform:scale(1.03)} to{opacity:1; transform:scale(1)}}
  @keyframes exit{from{opacity:1; transform:scale(1)} to{opacity:0; transform:scale(1.02)}}

  /* Small screens */
  @media (max-width:700px){
    .bullets{margin-left:18px}
    .navbtn{display:none}
  }
</style>
</head>
<body>

<!-- HOME -->
<section id="home" aria-label="Homepage">
  <div class="veil" aria-hidden="true"></div>
  <div class="home-card">
    <h1 class="home-title">The Roman Pantheon</h1>
    <p class="home-sub">An immersive, AP-level guided tour</p>
    <!-- MLA-style header -->
    <div class="mla">
      Amogh Bhat<br/>
      Mr. Loggins<br/>
      Period 3<br/>
      17 October 2025
    </div><br/>
    <button id="begin" class="home-btn">Begin Tour of Pantheon</button>
    <div class="hint">Press <strong>Space</strong> to advance • <strong>Backspace</strong> to go back</div>
  </div>
</section>

<!-- APP -->
<main id="app" aria-live="polite">
  <div class="progress" id="progress">1 / 13</div>
  <button id="prev" class="navbtn" aria-label="Previous slide">⟵</button>
  <button id="next" class="navbtn" aria-label="Next slide">⟶</button>

  <!-- Slides are inserted here -->
</main>

<!-- Controls -->
<button class="audio" id="audioToggle" aria-label="Pause or play background music">⏸︎ Music</button>
<button class="sources" id="sourcesBtn" aria-label="Open sources used">Sources Used</button>

<!-- Background music (public domain march, instrumental) -->
<audio id="bgm" preload="auto" loop>
  <source src="https://commons.wikimedia.org/wiki/Special:FilePath/The%20Washington%20Post%20-%20Ceremonial%20Brass%20-%20United%20States%20Air%20Force%20Band.mp3" type="audio/mpeg">
  <source src="https://commons.wikimedia.org/wiki/Special:FilePath/The%20Washington%20Post%20-%20Ceremonial%20Brass%20-%20United%20States%20Air%20Force%20Band.ogg" type="audio/ogg">
</audio>

<!-- Sources pane -->
<aside id="sourcesPane" role="dialog" aria-modal="true" aria-labelledby="srcTitle">
  <div class="sources-wrap">
    <button class="closeX" id="closeSources" title="Close">✕</button>
    <h2 id="srcTitle">Sources Used — MLA</h2>
    <ul>
      <!-- Core references -->
      <li>The Editors of <em>Encyclopaedia Britannica</em>. “Pantheon.” <em>Britannica</em>, 29 July 2025. <a href="https://www.britannica.com/topic/Pantheon-building-Rome-Italy">https://www.britannica.com/topic/Pantheon-building-Rome-Italy</a>.</li>
      <li>Harris, Beth, and Steven Zucker. “The Pantheon (Rome).” <em>Smarthistory</em>. <a href="https://smarthistory.org/the-pantheon/">https://smarthistory.org/the-pantheon/</a>.</li>
      <li>Pantheon Roma. “The Millennial-Old History of the Pantheon of Rome.” <em>PantheonRoma.com</em>. <a href="https://www.pantheonroma.com/pantheon-history/">https://www.pantheonroma.com/pantheon-history/</a>.</li>
      <li>Hannah, Robert, and Giulio Magli. “The Role of the Sun in the Pantheon’s Design and Meaning.” <em>Numen</em> 58.4 (2011): 486–513. Preprint, arXiv, 2009. <a href="https://arxiv.org/abs/0910.0128">https://arxiv.org/abs/0910.0128</a>.</li>
      <li>“Pantheon, Rome.” <em>Wikipedia</em>, last updated 2025. <a href="https://en.wikipedia.org/wiki/Pantheon,_Rome">https://en.wikipedia.org/wiki/Pantheon,_Rome</a>.</li>
      <li>“Fontana del Pantheon.” <em>Wikipedia</em>, 2025. <a href="https://en.wikipedia.org/wiki/Fontana_del_Pantheon">https://en.wikipedia.org/wiki/Fontana_del_Pantheon</a>.</li>
      <li>“Santa Maria ad Martyres (Pantheon).” <em>Churches of Rome</em>. <a href="https://www.churches-of-rome.info/CoR_Info/SMadMartyres-386/Pantheon.html">https://www.churches-of-rome.info/CoR_Info/SMadMartyres-386/Pantheon.html</a>.</li>
      <li>“Pantheon (Rome) — ArcheoRoma.” <em>ArcheoRoma</em>. <a href="https://www.archeoroma.org/sites/pantheon/">https://www.archeoroma.org/sites/pantheon/</a>.</li>

      <!-- Images (Wikimedia Commons) -->
      <li>Reusch, Pascal. <em>Pantheon and Fountain at Night</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon_and_fountain_at_night.JPG">commons.wikimedia.org/wiki/File:Pantheon_and_fountain_at_night.JPG</a>.</li>
      <li>daniele_malavolta. <em>Rome Pantheon Facade and Piazza della Rotonda</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Rome_Pantheon_facade_and_Piazza_della_Rotonda.jpg">commons.wikimedia.org/wiki/File:Rome_Pantheon_facade_and_Piazza_della_Rotonda.jpg</a>.</li>
      <li>Wknight94. <em>Pantheon (Rome) Entrance Door</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon_(Rome)_entrance_door.jpg">commons.wikimedia.org/wiki/File:Pantheon_(Rome)_entrance_door.jpg</a>.</li>
      <li>Livioandronico2013. <em>Pantheon Interior</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon_interior_(45696759504).jpg">commons.wikimedia.org/wiki/File:Pantheon_interior_(45696759504).jpg</a>.</li>
      <li>Sund, Sheila. <em>Pantheon, Rome with Oculus Lighting</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon,_Rome_with_oculus_lighting_(8404115660).jpg">commons.wikimedia.org/wiki/File:Pantheon,_Rome_with_oculus_lighting_(8404115660).jpg</a>.</li>
      <li>Perfect Tommy. <em>Pantheon Floor Drainage</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon_floor_drainage.jpg">commons.wikimedia.org/wiki/File:Pantheon_floor_drainage.jpg</a>.</li>
      <li>John Samuel. <em>Pantheon — Interior 03</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon_(Rome)_-_Interior_03.jpg">commons.wikimedia.org/wiki/File:Pantheon_(Rome)_-_Interior_03.jpg</a>.</li>
      <li>Anthony M. <em>Pantheon Dome (Exterior)</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon_dome.jpg">commons.wikimedia.org/wiki/File:Pantheon_dome.jpg</a>.</li>
      <li>Paolo Rosa. <em>Panteon Oculus Light</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Panteon_oculus_light.JPG">commons.wikimedia.org/wiki/File:Panteon_oculus_light.JPG</a>.</li>
      <li>Ank Kumar. <em>The Tomb of Raphael in the Pantheon</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:The_tomb_of_Raphael_in_the_Pantheon_in_Rome,_Italy_(Ank_Kumar)_06.jpg">commons.wikimedia.org/wiki/File:The_tomb_of_Raphael_in_the_Pantheon_in_Rome,_Italy_(Ank_Kumar)_06.jpg</a>.</li>
      <li>Ricardo André Frantz (Tetraktys). <em>Raphael’s Tomb</em>. <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:Pantheon-raphaels-tomb.jpg">commons.wikimedia.org/wiki/File:Pantheon-raphaels-tomb.jpg</a>.</li>

      <!-- Audio -->
      <li>United States Air Force Band. “The Washington Post — Ceremonial Brass.” <em>Wikimedia Commons</em>. <a href="https://commons.wikimedia.org/wiki/File:The_Washington_Post_-_Ceremonial_Brass_-_United_States_Air_Force_Band.mp3">commons.wikimedia.org/wiki/File:The_Washington_Post_-_Ceremonial_Brass_-_United_States_Air_Force_Band.mp3</a>.</li>
    </ul>
  </div>
</aside>

<script>
/* ========= UTIL: images (fast, reliable) ========= */
const IMG = (file) => `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(file)}?width=1920`;

/* ========= TOUR CONTENT (13 sections) ========= */
const slides = [
  {
    title: "Piazza della Rotonda — First Glimpse",
    img: IMG("Pantheon and fountain at night.JPG"),
    para: "Night air, murmuring water, and the mass of the Pantheon ahead. The fountain and obelisk center the square while the temple-portico draws the eye inward.",
    bullets: [
      "Lines: vertical granite columns vs. the obelisk’s needle; the facade frames the view.",
      "Color: warm lamp-light on cool stone; bronze shadows under the pediment.",
      "Texture: weathered travertine and smooth granite; rippling water softens the scene.",
      "Spatial flow: open piazza ➝ deep porch ➝ hidden rotunda — a deliberate reveal.",
      "Composition: rectangle (portico) set before a circle (drum), a classical harmony."
    ]
  },
  {
    title: "The Facade and Inscription",
    img: IMG("Rome Pantheon facade and Piazza della Rotonda.jpg"),
    para: "The entablature proclaims M·AGRIPPA·L·F·COS·TERTIVM·FECIT. Hadrian rebuilt the structure but preserved Agrippa’s credit — a political bow to tradition.",
    bullets: [
      "Period style: High Imperial Roman; regional: Rome’s Campus Martius.",
      "Order: eight monolithic Corinthian shafts across the front, more within.",
      "Classification: architecture that fuses Greek orders with Roman engineering.",
      "Later Baroque city-making: the piazza and fountain were reshaped centuries later."
    ]
  },
  {
    title: "Bronze Doors — Threshold to the Divine",
    img: IMG("Pantheon (Rome) entrance door.jpg"),
    para: "Bronze leaves swing open to a darker world. Crossing the threshold is a ritual: the city falls away; the rotunda hushes everything.",
    bullets: [
      "Medium: cast bronze for the doors; stone and concrete for the shell.",
      "Technique: monumental metalwork on ancient pivots; precise, durable fittings.",
      "Material sound: a low metallic thud; then silence and stone acoustics."
    ]
  },
  {
    title: "Entering the Rotunda",
    img: IMG("Pantheon interior (45696759504).jpg"),
    para: "A perfect interior: the height to the oculus equals the diameter of the floor. The room feels like a contained piece of sky lowered to human scale.",
    bullets: [
      "Form: a sphere implied inside a cylinder — pure geometry, legible at a glance.",
      "Spatial attribute: continuous ambulatory ring with radiating niches.",
      "Composition: paired columns articulate bays; colored marbles band the walls."
    ]
  },
  {
    title: "The Oculus — Light as Architecture",
    img: IMG("Pantheon, Rome with oculus lighting (8404115660).jpg"),
    para: "A circular eye opens to the heavens. Sunlight descends in a moving beam, marking time and sanctifying whichever surface it touches.",
    bullets: [
      "Coffers shrink toward the crown, lightening the dome and accelerating perspective.",
      "Light acts like a slow sundial, aligning seasonally with the doorway at noon.",
      "Content: a cosmological room — earth below, heavens above, ruler between."
    ]
  },
  {
    title: "Floor & Drains — Beautiful Problem-Solving",
    img: IMG("Pantheon floor drainage.jpg"),
    para: "Rain falls freely through the oculus; the floor’s gentle convexity and discreet drains carry it away. Utility is drafted into elegance.",
    bullets: [
      "Technique: graded slope, marble tessellation, nearly invisible outlets.",
      "Design thinking: let nature in; answer it with engineering, not avoidance."
    ]
  },
  {
    title: "Materials & Making",
    img: IMG("Pantheon (Rome) - Interior 03.jpg"),
    para: "The palette is imperial: porphyry, giallo antico, pavonazzetto, and granite — quarried across the empire, assembled with precision in Rome.",
    bullets: [
      "Medium: Roman concrete in the dome; revetments of precious marbles.",
      "Technique: aggregates lighten with height (travertine ➝ tufa ➝ pumice).",
      "Formalist note: pattern and proportion organize color into ordered bands."
    ]
  },
  {
    title: "Dome Exterior — Mass and Lightness",
    img: IMG("Pantheon dome.jpg"),
    para: "Outside, the dome sits low and earth-colored, stepping subtly as it rises. The drum’s thickness hides relieving arches that take the thrust.",
    bullets: [
      "Structure: thick drum walls; hidden brick relieving vaults; weight tuned by mix.",
      "Style: restrained exterior masks a radical interior space — Roman pragmatism."
    ]
  },
  {
    title: "Beam, Air, Weather",
    img: IMG("Panteon oculus light.JPG"),
    para: "Light, breeze, and even rain participate in the ritual of the room. On certain dates at noon the sun hovers at the entrance, theatrically greeting visitors.",
    bullets: [
      "Idea: heaven’s eye animates the interior; time becomes visible.",
      "Audience effect: awe, orientation, and a changed sense of scale."
    ]
  },
  {
    title: "Temple to Church",
    img: IMG("Pantheon interior (45696759504).jpg"),
    para: "In 609 CE the building became Santa Maria ad Martyres. That change safeguarded it through the Middle Ages and redefined its meaning without erasing its past.",
    bullets: [
      "Content shift: from ‘all gods’ to Christian worship; continuity through reuse.",
      "Legacy: survival by adaptation — liturgy under an ancient cosmic dome."
    ]
  },
  {
    title: "Raphael and the Kings",
    img: IMG("The tomb of Raphael in the Pantheon in Rome, Italy (Ank_Kumar) 06.jpg"),
    para: "Raphael rests here by choice. Nearby, Italy’s kings lie in state. Fame, nationhood, and antiquity share the same architectural breath.",
    bullets: [
      "Interesting story: Raphael’s epitaph imagines Nature fearing to die with him.",
      "Meaning: the Pantheon became a civic and cultural shrine as well as sacred space."
    ]
  },
  {
    title: "Losses & Afterlives",
    img: IMG("Pantheon (Rome) - Interior 03.jpg"),
    para: "Bronze once sparkled in the portico’s coffers; later centuries stripped and repurposed it. Yet the core ideas — geometry, light, mass — endure untouched.",
    bullets: [
      "Style dialogue: classical fabric altered by Baroque urbanism and papal agendas.",
      "Legacy: a model for domes from Brunelleschi to the U.S. Capitol."
    ]
  },
  {
    title: "Stepping Back Outside",
    img: IMG("Rome Pantheon facade and Piazza della Rotonda.jpg"),
    para: "We return to the square. The composition still works its spell: obelisk and fountain pull the public close; the porch invites; the rotunda keeps its secret.",
    bullets: [
      "Point of View: power expressed as calm perfection — Rome’s order made stone.",
      "Takeaway: Form (line, color, texture, space, composition), Content, Style, Medium, Technique, POV, and Legacy all converge into a single, unforgettable place."
    ]
  }
];

/* ========= RENDER ========= */
const app = document.getElementById('app');
const progressEl = document.getElementById('progress');

function makeSlide(s, idx){
  const el = document.createElement('section');
  el.className = 'slide' + (idx===0?' active':'');
  el.style.backgroundImage = `url("${s.img}")`;

  el.innerHTML = `
    <div class="content">
      <article class="card">
        <h2 class="title">${s.title}</h2>
        <p class="para">${s.para}</p>
        ${s.bullets?.length ? `<ul class="bullets">${s.bullets.map(b=>`<li>${b}</li>`).join('')}</ul>` : ``}
      </article>
    </div>
    <div class="foot"></div>
  `;
  return el;
}
slides.forEach((s,i)=> app.appendChild(makeSlide(s,i)));

/* ========= STATE & NAV ========= */
const slideEls = [...document.querySelectorAll('.slide')];
let i = 0;
const total = slideEls.length;
const setProgress = ()=> progressEl.textContent = `${i+1} / ${total}`;

function go(n){
  if(n<0||n>=total||n===i) return;
  const cur = slideEls[i], next = slideEls[n];
  cur.classList.remove('active'); cur.classList.add('exiting');
  next.classList.add('entering','active');
  // cleanup classes after animation
  setTimeout(()=>{ cur.classList.remove('exiting'); next.classList.remove('entering'); }, 750);
  i = n; setProgress();
}
function next(){ if(i<total-1) go(i+1); }
function prev(){ if(i>0) go(i-1); }

document.getElementById('next').onclick = next;
document.getElementById('prev').onclick = prev;

document.addEventListener('keydown', (e)=>{
  if(sourcesOpen) return; // lock nav while sources open
  if(e.code==='Space'){ e.preventDefault(); next(); }
  else if(e.code==='Backspace'){ e.preventDefault(); prev(); }
  else if(e.code==='ArrowRight'){ next(); }
  else if(e.code==='ArrowLeft'){ prev(); }
});

/* ========= HOME & AUDIO ========= */
const begin = document.getElementById('begin');
const home = document.getElementById('home');
const appRoot = document.getElementById('app');
const bgm = document.getElementById('bgm');
const audioToggle = document.getElementById('audioToggle');

begin.addEventListener('click', async ()=>{
  home.style.display='none';
  appRoot.style.display='block';
  // attempt autoplay after user gesture
  try { await bgm.play(); audioToggle.textContent='⏸︎ Music'; } catch(e){ audioToggle.textContent='▶︎ Music'; }
});
audioToggle.addEventListener('click', async ()=>{
  if(bgm.paused){ await bgm.play(); audioToggle.textContent='⏸︎ Music'; }
  else{ bgm.pause(); audioToggle.textContent='▶︎ Music'; }
});

/* ========= SOURCES PANEL ========= */
const sourcesBtn = document.getElementById('sourcesBtn');
const sourcesPane = document.getElementById('sourcesPane');
const closeSources = document.getElementById('closeSources');
let sourcesOpen=false;
sourcesBtn.onclick = ()=>{ sourcesPane.style.display='block'; sourcesOpen=true; };
closeSources.onclick = ()=>{ sourcesPane.style.display='none'; sourcesOpen=false; };

/* ========= PRELOAD for speed & to avoid “black” slides ========= */
const toPreload = slides.map(s=>s.img);
toPreload.forEach(src => { const im = new Image(); im.src = src; });

/* Initial progress */
setProgress();
</script>
</body>
</html>

